---
title: 分布式系统设计——3. RPC 框架简单设计
date: 2020-10-25 13:10:21
tags:
- 
categories:
- 分布式 
---



# 分布式系统设计——3. RPC 框架简单设计

### 前言

  这篇文章取自[这篇博客](https://github.com/doocs/advanced-java/blob/master/docs/distributed-system/dubbo-rpc-design.md)，作为整理和收录，方便后续查阅。

  举个栗子，说个最简单的回答思路：

- 上来你的服务就得去注册中心注册吧，你是不是得有个注册中心，保留各个服务的信息，可以用 zookeeper 来做，对吧。
- 然后你的消费者需要去注册中心拿对应的服务信息吧，对吧，而且每个服务可能会存在于多台机器上。
- 接着你就该发起一次请求了，咋发起？当然是基于动态代理了，你面向接口获取到一个动态代理，这个动态代理就是接口在本地的一个代理，然后这个代理会找到服务对应的机器地址。
- 然后找哪个机器发送请求？那肯定得有个负载均衡算法了，比如最简单的可以随机轮询是不是。
- 接着找到一台机器，就可以跟它发送请求了，第一个问题咋发送？你可以说用 netty 了，nio 方式；第二个问题发送啥格式数据？你可以说用 hessian 序列化协议了，或者是别的，对吧。然后请求过去了。
- 服务器那边一样的，需要针对你自己的服务生成一个动态代理，监听某个网络端口了，然后代理你本地的服务代码。接收到请求的时候，就调用对应的服务代码，对吧。

  这就是一个最最基本的 rpc 框架的思路。

### 参考文章

[1. dubbo-rpc-design](https://github.com/doocs/advanced-java/blob/master/docs/distributed-system/dubbo-rpc-design.md)